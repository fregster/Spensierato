<xsl:template match="/">
        <html>
			<xsl:call-template name="header"/>

			<xsl:element name="body">
			<!-- <xsl:attribute name="onload">tinyMCE_onkeyup('e_<xsl:value-of select="/page/body/element/@id" />');</xsl:attribute> -->
					<div id="page_edit">
					<xsl:element name="form">
						<xsl:attribute name="action"></xsl:attribute>
						<xsl:attribute name="method">POST</xsl:attribute>
						<xsl:attribute name="id">e_<xsl:value-of select="/page/body/element/@id" /></xsl:attribute>
						<xsl:call-template name="edit_header"/><p>
						<div>
							<xsl:element name="textarea">
							<xsl:attribute name="style">width:100%</xsl:attribute>
							<xsl:attribute name="cols">80</xsl:attribute>
							<xsl:attribute name="rows">15</xsl:attribute>
							<xsl:attribute name="name">content</xsl:attribute>
							<xsl:attribute name="id">content</xsl:attribute>
							<xsl:value-of select="/page/body/element/data/html" />
							</xsl:element>
						</div>
						</p>
						<xsl:call-template name="edit_footer"/>
					</xsl:element>
					</div>
			</xsl:element>
        </html>
</xsl:template>

<xsl:template name="edit_header">
	<div id="edit_header">
		Element Name:
		Created By:
		If edited last edited by:
		Revision:
		Aproved By:
		Approved On:
	</div>
</xsl:template>

<xsl:template name="edit_footer">
	<div id="edit_footer">	
		<xsl:element name="input">
			<xsl:attribute name="type">button</xsl:attribute>
			<xsl:attribute name="value">Re-Load</xsl:attribute>
			<xsl:attribute name="onclick">ajaxLoad(e_<xsl:value-of select="/page/body/element/@id" />);</xsl:attribute>
		</xsl:element>
		<xsl:element name="input">
			<xsl:attribute name="type">button</xsl:attribute>
			<xsl:attribute name="value">Save</xsl:attribute>
			<xsl:attribute name="onclick">ajaxSave(e_<xsl:value-of select="/page/body/element/@id" />);</xsl:attribute>
		</xsl:element>
	</div>
</xsl:template>

<xsl:template name="header">
			<head>
				<xsl:element name="title"><xsl:value-of select="/page/settings/site_name_short" /> | Content Editor</xsl:element>
				
				<xsl:element name="meta">
					<xsl:attribute name="name">keywords</xsl:attribute>
					<xsl:attribute name="content">Stylesheets</xsl:attribute>
				</xsl:element>
				
				<xsl:element name="link">
					<xsl:attribute name="href"><xsl:value-of select="/page/settings/document_root" />/css</xsl:attribute>
					<xsl:attribute name="type">text/css</xsl:attribute>
					<xsl:attribute name="rel">stylesheet</xsl:attribute>
				</xsl:element>
				<xsl:element name="script">
					<xsl:attribute name="type">text/javascript</xsl:attribute>
					<xsl:attribute name="src"><xsl:value-of select="/page/settings/document_root" />/editor/tiny_mce.js</xsl:attribute>
				</xsl:element>
				<xsl:element name="script">
					<xsl:attribute name="type">text/javascript</xsl:attribute>
					<xsl:attribute name="src"><xsl:value-of select="/page/settings/site_folder_js" />public.js</xsl:attribute>
				</xsl:element>
				<xsl:element name="script">
					<xsl:attribute name="type">text/javascript</xsl:attribute>
					<xsl:attribute name="src"><xsl:value-of select="/page/settings/site_folder_js" />logged_in.js</xsl:attribute>
				</xsl:element>
				<xsl:element name="script">
					<xsl:attribute name="type">text/javascript</xsl:attribute>
					<xsl:attribute name="src"><xsl:value-of select="/page/settings/site_folder_js" />admin.js</xsl:attribute>
				</xsl:element>
				
				<script type="text/javascript">
				tinyMCE.init({
						mode : "textareas",
						theme : "simple",
						button_tile_map : true
						//,setup : function(ed) {ed.onKeyUp.add(tinyMCE_onkeyup('e_<xsl:value-of select="/page/body/element/@id" />')); }
						,setup : function(ed) {
								ed.onKeyPress.add(function(ed, e) {
          						alert('Key press event: ' + e.keyCode); }
					      });				
				</script>
			</head>
	</xsl:template>