
		<xsl:template name="javascript">
				<xsl:if test="/page/user/id = 0">
				<!-- User Not logged in -->
					<xsl:element name="script">
						<xsl:attribute name="type">text/javascript</xsl:attribute>
						<xsl:attribute name="src"><xsl:value-of select="/page/settings/site_folder_js" />public.js</xsl:attribute>
					</xsl:element>
				</xsl:if>
				
				<xsl:if test="/page/user/id != 0">
				<!-- User logged in -->
				
					<xsl:if test="/page/options/admin_mode = 1">
					<!-- User logged in and in admin mode-->
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="/page/settings/site_folder_js" />public.js</xsl:attribute>
						</xsl:element>
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="/page/settings/site_folder_js" />logged_in.js</xsl:attribute>
						</xsl:element>
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="/page/settings/site_folder_js" />admin.js</xsl:attribute>
						</xsl:element>
						
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="/page/settings/site_folder_js" />submodal/common.js</xsl:attribute>
						</xsl:element>
						
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="/page/settings/site_folder_js" />submodal/subModal.js</xsl:attribute>
						</xsl:element>
						
						<script type="text/javascript">
						function pageReload(returnVal) 
						{
                        	window.top.document.body.innerHTML = '';
							window.top.location = '<xsl:value-of select="/page/settings/document_root" />/'+returnVal;
                        }
						</script>
					</xsl:if>
				
					<xsl:if test="/page/options/admin_mode != 1">
					<!-- User logged in and NOT in admin mode-->
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="/page/settings/site_folder_js" />public.js</xsl:attribute>
						</xsl:element>
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="/page/settings/site_folder_js" />logged_in.js</xsl:attribute>
						</xsl:element>
					</xsl:if>
					
				</xsl:if>
				<xsl:if test="boolean(/page/settings/google_analytics_id)">
					<script type="text/javascript">
					var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
					document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
					</script>
					<script type="text/javascript">
					var pageTracker = _gat._getTracker("<xsl:value-of select="/page/settings/google_analytics_id" />");
					pageTracker._initData();
					pageTracker._trackPageview();
					</script>
				</xsl:if>
		</xsl:template>