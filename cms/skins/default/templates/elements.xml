
	<xsl:template match="element[@type = 'element_Text']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<xsl:value-of select="./data/html" />
		</xsl:element>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Contact']">
		<xsl:call-template name="element_admin_header"/>

		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<xsl:value-of select="./@title" /> - <xsl:element name="a">
			<!--<xsl:attribute name="class">submodal</xsl:attribute>
				<xsl:attribute name="href"><xsl:value-of select="/page/settings/document_root" />/tools/contact/<xsl:value-of select="./@id" /></xsl:attribute>
				<xsl:choose>
					<xsl:when test="string-length(./data/userid) != 0">
						<xsl:attribute name="href">mailto:<xsl:value-of select="./data/userid" /></xsl:attribute>
					</xsl:when>

					<xsl:otherwise>-->
						<xsl:attribute name="href">mailto:<xsl:value-of select="./data/email" /></xsl:attribute>
					<!--</xsl:otherwise>
				</xsl:choose>-->
				<xsl:value-of select="./data/name" />
			</xsl:element>
		</xsl:element>

		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Video']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:if test="./data/filesize > 0">
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<xsl:call-template name="mediaplayer"/>
		</xsl:element>
		</xsl:if>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Gallery']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<xsl:call-template name="imagegallery"/>
		</xsl:element>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Image']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:if test="./data/filesize > 0">
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
				<xsl:element name="a">
				<xsl:attribute name="href"><xsl:value-of select="/page/settings/document_root" />/download/<xsl:value-of select="./@id" /></xsl:attribute>
					<xsl:element name="img">
						<xsl:attribute name="src"><xsl:value-of select="/page/settings/document_root" />/preview/<xsl:value-of select="./@id" /></xsl:attribute>
						<xsl:attribute name="class">image</xsl:attribute>
						<xsl:attribute name="alt"><xsl:value-of select="./data/linktext" /> (<xsl:value-of select="round(./data/filesize div 1024)" /> Kb)</xsl:attribute>
					</xsl:element>
			</xsl:element>
		</xsl:element>
		</xsl:if>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Download']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:if test="./data/filesize > 0">
			<xsl:element name="div">
				<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
				<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
				<xsl:attribute name="class"><xsl:value-of select="./@type" /> rounded</xsl:attribute>
				<xsl:element name="a">
					<xsl:attribute name="href"><xsl:value-of select="/page/settings/document_root" />/download/<xsl:value-of select="./@id" /></xsl:attribute>
						<xsl:element name="img">
							<xsl:attribute name="src"><xsl:value-of select="/page/settings/document_root" />/skin/transparent-gif.gif</xsl:attribute>
							<xsl:attribute name="class">sprite sprite-attach</xsl:attribute>
							<xsl:attribute name="alt">Icon</xsl:attribute>
						</xsl:element> Download:
					<xsl:value-of select="./data/linktext" /> (<xsl:value-of select="round(./data/filesize div 1024)" /> Kb)
				</xsl:element>
			</xsl:element>
		</xsl:if>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Flash']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>

			<xsl:if test="./data/filesize > 0">
				<script type="text/javascript">
					swfobject.embedSWF("<xsl:value-of select="/page/settings/document_root" />/download/<xsl:value-of select="./@id" />", "flashcontent", "100%", "100%", "9.0.0", "<xsl:value-of select="/page/settings/document_root" />/files/expressinstall.swf", false, {salign:"t"});
				</script>

				<div style="height: 500px; vertical-align: text-top;" id="flashcontent">You do not have Adobe Flash player installed.</div>
			</xsl:if>

		</xsl:element>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Link']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<xsl:element name="a">
				<xsl:attribute name="href"><xsl:value-of select="./data/href" /></xsl:attribute>
				<xsl:choose>
					<xsl:when test="string-length(./data/text) != 0">
						<xsl:value-of select="./data/text" />
					</xsl:when>

					<xsl:otherwise>
						<xsl:value-of select="./data/href" />
					</xsl:otherwise>
				</xsl:choose>
			</xsl:element>
		</xsl:element>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Account']">
		<div id="account_personal_details">
		<xsl:if test="/user/administrator =1">You are set as a site Admin you have global edit permissions and have the ability to change site options</xsl:if>
			<div id="account_personal_details_title">Personal Details for <xsl:value-of select="/page/user/username" /></div>
			<xsl:element name="form">
				<xsl:attribute name="action"><xsl:value-of select="/page/settings/document_root" />/edit/account</xsl:attribute>
				<xsl:attribute name="method">post</xsl:attribute>
				<xsl:attribute name="id">update_<xsl:value-of select="/page/@id" /></xsl:attribute>
			<div>
				<div class="account_title">Nickname: </div>
				<div class="account_detail">
					<xsl:element name="input">
						<xsl:attribute name="type">text</xsl:attribute>
						<xsl:attribute name="name">nickname</xsl:attribute>
						<xsl:attribute name="value"><xsl:value-of select="/page/user/nickname" /></xsl:attribute>
					</xsl:element>
				</div>
			</div>
			<div>
				<div class="account_title">Forename: </div>
				<div class="account_detail">
					<xsl:element name="input">
						<xsl:attribute name="type">text</xsl:attribute>
						<xsl:attribute name="name">forename</xsl:attribute>
						<xsl:attribute name="value"><xsl:value-of select="/page/user/forename" /></xsl:attribute>
					</xsl:element>

			</div>
			</div>
				<div class="account_title">Surname: </div>
				<div class="account_detail">
					<xsl:element name="input">
						<xsl:attribute name="type">text</xsl:attribute>
						<xsl:attribute name="name">surname</xsl:attribute>
						<xsl:attribute name="value"><xsl:value-of select="/page/user/surname" /></xsl:attribute>
					</xsl:element>

			</div>
			<div>
				<div class="account_title">E-Mail: </div>
				<div class="account_detail">
					<xsl:element name="input">
						<xsl:attribute name="type">text</xsl:attribute>
						<xsl:attribute name="name">email</xsl:attribute>
						<xsl:attribute name="value"><xsl:value-of select="/page/user/email" /></xsl:attribute>
					</xsl:element>
				</div>
			<input type="submit" value="Update" />
			</div>
			</xsl:element>
			<div id="account_change_password_link">
			<xsl:element name="a">
				<xsl:attribute name="class">submodal</xsl:attribute>
				<xsl:attribute name="href"><xsl:value-of select="/page/settings/document_root" />/tools/changepassword</xsl:attribute>
				<span>Change Password</span>
			</xsl:element>
			</div>
		</div>
	</xsl:template>
	
	<xsl:template match="element[@type = 'element_RSS']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<xsl:value-of select="./data/rss" />
		</xsl:element>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>
	
	<xsl:template match="element[@type = 'elementSearchResults']">
	Search Results
		<xsl:for-each select="search/results/result">
			<xsl:element name="div">
				<xsl:attribute name="id">eid_<xsl:value-of select="id" /></xsl:attribute>
				<xsl:attribute name="class">search_result</xsl:attribute>
				
				<div class="search_title">
					<xsl:value-of select="position" /> : <xsl:if test="id != page">[Direct Download] </xsl:if>
					<xsl:element name="a">
						<xsl:attribute name="href"><xsl:value-of select="/page/settings/document_root" />/<xsl:if test="id != page">download/</xsl:if><xsl:value-of select="id" /></xsl:attribute>
						<xsl:value-of select="title" />
					</xsl:element>
				</div>
				<div>
					<xsl:value-of select="html" />
					<br />
					Score: <xsl:value-of select="score" /> features on 
					<xsl:element name="a">
						<xsl:attribute name="class">search_link</xsl:attribute>
						<xsl:attribute name="href"><xsl:value-of select="/page/settings/document_root" />/<xsl:value-of select="page" /></xsl:attribute>
						<xsl:value-of select="/page/settings/document_root" />/<xsl:value-of select="page" />
					</xsl:element>
				</div>
			</xsl:element>
		</xsl:for-each>
	</xsl:template>
	
	<xsl:template match="element[@type = 'element_TagTree']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<xsl:value-of select="./data/rss" />
		</xsl:element>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>
	
	<xsl:template match="element[@type = 'element_QuickProduct']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<span><xsl:value-of select="./@title" /> </span><span> - <xsl:value-of select="/page/settings/currency_symbol" /><xsl:value-of select="./data/Price" />
			<xsl:if test="./data/Shipping">
			+ Postage and Packaging
			</xsl:if>
			</span>
			<xsl:element name="form">
				<xsl:attribute name="style">display:inline;</xsl:attribute>
				<xsl:attribute name="method">get</xsl:attribute>
				<xsl:attribute name="action"><xsl:value-of select="/page/settings/document_root" />/cart/add/<xsl:value-of select="./@id" /></xsl:attribute>
				<xsl:element name="div">
					<xsl:attribute name="style"><xsl:value-of select="./@title" /></xsl:attribute>
					<xsl:element name="input">
						<xsl:attribute name="style">display:inline;</xsl:attribute>
						<xsl:attribute name="type">submit</xsl:attribute>
						<xsl:attribute name="value">Add to Cart</xsl:attribute> 
					</xsl:element>
				</xsl:element>
			</xsl:element>
			
			<br/>
			
			<xsl:if test="./data/description">
				<span><xsl:value-of select="./data/description"/></span>
			</xsl:if>
		</xsl:element>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>