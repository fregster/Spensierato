
		<xsl:template name="javascript">
				<xsl:if test="/page/user/id = 0">
				<!-- User Not logged in -->
					<xsl:element name="script">
						<xsl:attribute name="type">text/javascript</xsl:attribute>
						<xsl:attribute name="src"><xsl:value-of select="page/settings/site_folder_js" />public.js</xsl:attribute>
					</xsl:element>
				</xsl:if>
				
				<xsl:if test="/page/user/id != 0">
				<!-- User logged in -->
				
					<xsl:if test="/page/options/admin_mode = 1">
					<!-- User logged in and in admin mode-->
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="page/settings/site_folder_js" />public.js</xsl:attribute>
						</xsl:element>
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="page/settings/site_folder_js" />logged_in.js</xsl:attribute>
						</xsl:element>
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="page/settings/site_folder_js" />admin.js</xsl:attribute>
						</xsl:element>
<!-- tinyMCE -->
<xsl:element name="script">
	<xsl:attribute name="type">text/javascript</xsl:attribute>
	<xsl:attribute name="src"><xsl:value-of select="page/settings/document_root" />/tinymce/tiny_mce_gzip.js</xsl:attribute>
</xsl:element>
<script type="text/javascript">
tinyMCE_GZ.init({
	plugins : 'style,layer,table,save,advhr,advimage,advlink,emotions,iespell,insertdatetime,preview,media,'+ 
        'searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras',
	themes : 'simple,advanced',
	languages : 'en',
	disk_cache : true,
	debug : false
});
</script>

<!-- Needs to be seperate script tags! -->
<script language="javascript" type="text/javascript">
tinyMCE.init({
		mode : "textareas",
		theme : "simple"
	});

</script>
<!-- /tinyMCE -->
					</xsl:if>
				
					<xsl:if test="/page/options/admin_mode != 1">
					<!-- User logged in and NOT in admin mode-->
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="page/settings/site_folder_js" />public.js</xsl:attribute>
						</xsl:element>
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="page/settings/site_folder_js" />logged_in.js</xsl:attribute>
						</xsl:element>
					</xsl:if>
					
				</xsl:if>
		</xsl:template>