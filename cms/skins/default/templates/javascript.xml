
		<xsl:template name="javascript">
				<xsl:if test="/page/user/id = 0">
				<!-- User Not logged in -->
					<xsl:element name="script">
						<xsl:attribute name="type">text/javascript</xsl:attribute>
						<xsl:attribute name="src"><xsl:value-of select="page/settings/site_folder_js" />public.js</xsl:attribute>
					</xsl:element>
				</xsl:if>
				
				<xsl:if test="/page/user/id != 0">
				<!-- User logged in -->
				
					<xsl:if test="/page/options/admin_mode = 1">
					<!-- User logged in and in admin mode-->
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="page/settings/site_folder_js" />public.js</xsl:attribute>
						</xsl:element>
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="page/settings/site_folder_js" />logged_in.js</xsl:attribute>
						</xsl:element>
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="page/settings/site_folder_js" />admin.js</xsl:attribute>
						</xsl:element>
<!-- tinyMCE -->
<xsl:element name="script">
	<xsl:attribute name="type">text/javascript</xsl:attribute>
	<xsl:attribute name="src"><xsl:value-of select="page/settings/document_root" />/tinymce/tiny_mce.js</xsl:attribute>
</xsl:element>
<!--
<script type="text/javascript">
tinyMCE_GZ.init({
	plugins : 'style,layer,table,save,advhr,advimage,advlink,emotions,iespell,insertdatetime,preview,media,'+ 
        'searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras',
	themes : 'simple,advanced',
	languages : 'en',
	disk_cache : true,
	debug : false
});
</script>
-->
<!-- Needs to be seperate script tags! -->
<script language="javascript" type="text/javascript">
tinyMCE.init({
		mode : "textareas",
		theme : "simple"
	});

</script>
<!-- /tinyMCE 

plugins : 'style,table,save,advhr,advlink,emotions,iespell,insertdatetime,'+ 
        'searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras',
		theme_advanced_buttons1_add_before : "save,newdocument,separator",
		theme_advanced_buttons1_add : "fontselect,fontsizeselect",
		theme_advanced_buttons2_add : "separator,insertdate,inserttime,separator,forecolor,backcolor",
		theme_advanced_buttons2_add_before: "cut,copy,paste,pastetext,pasteword,separator,search,replace,separator",
		theme_advanced_buttons3_add_before : "tablecontrols,separator",
		theme_advanced_buttons3_add : "iespell,advhr,separator,print,separator,ltr,rtl,separator,fullscreen",
		theme_advanced_buttons4 : "spellchecker,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,blockquote,pagebreak",
		theme_advanced_toolbar_location : "top",
		theme_advanced_toolbar_align : "left",
		theme_advanced_statusbar_location : "bottom",
	    plugin_insertdate_dateFormat : "%Y-%m-%d",
	    plugin_insertdate_timeFormat : "%H:%M:%S",
		theme_advanced_resize_horizontal : false,
		theme_advanced_resizing : true,
		apply_source_formatting : true,
		spellchecker_languages : "+English=en"

-->
					</xsl:if>
				
					<xsl:if test="/page/options/admin_mode != 1">
					<!-- User logged in and NOT in admin mode-->
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="page/settings/site_folder_js" />public.js</xsl:attribute>
						</xsl:element>
						<xsl:element name="script">
							<xsl:attribute name="type">text/javascript</xsl:attribute>
							<xsl:attribute name="src"><xsl:value-of select="page/settings/site_folder_js" />logged_in.js</xsl:attribute>
						</xsl:element>
					</xsl:if>
					
				</xsl:if>
		</xsl:template>