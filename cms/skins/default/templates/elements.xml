
	<xsl:template match="element[@type = 'element_Text']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<xsl:value-of select="./data/html" />
		</xsl:element>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Contact']">
		<xsl:call-template name="element_admin_header"/>

		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<xsl:value-of select="./@title" /> - <xsl:element name="a">
			<!--<xsl:attribute name="class">submodal</xsl:attribute>
				<xsl:attribute name="href"><xsl:value-of select="/page/settings/document_root" />/tools/contact/<xsl:value-of select="./@id" /></xsl:attribute>
				<xsl:choose>
					<xsl:when test="string-length(./data/userid) != 0">
						<xsl:attribute name="href">mailto:<xsl:value-of select="./data/userid" /></xsl:attribute>
					</xsl:when>

					<xsl:otherwise>-->
						<xsl:attribute name="href">mailto:<xsl:value-of select="./data/email" /></xsl:attribute>
					<!--</xsl:otherwise>
				</xsl:choose>-->
				<xsl:value-of select="./data/name" />
			</xsl:element>
		</xsl:element>

		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Video']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:if test="./data/filesize > 0">
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<xsl:call-template name="mediaplayer"/>
		</xsl:element>
		</xsl:if>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>
	
	<xsl:template match="element[@type = 'element_YouTube']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:if test="./data/video_id">
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<iframe class="youtube-player" type="text/html" width="640" height="385" src="http://www.youtube.com/embed/{./data/video_id}" frameborder="0"></iframe>
		</xsl:element>
		</xsl:if>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>
	
	<xsl:template match="element[@type = 'element_YouTubeChannel']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:if test="string-length(./data/load) > 1">
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<div id="videoBar{./@id}" class="videoBar" style="width:100px">Loading...</div>
			<script type="text/javascript">LoadVideoBar('<xsl:value-of select="./@id" />','<xsl:value-of select="./data/load" />');</script>
		</xsl:element>
		</xsl:if>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Gallery']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<xsl:call-template name="imagegallery"/>
		</xsl:element>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Image']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:if test="./data/filesize > 0">
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
				<xsl:element name="a">
				<xsl:attribute name="href"><xsl:value-of select="/page/settings/document_root" />/download/<xsl:value-of select="./@id" /></xsl:attribute>
					<xsl:element name="img">
						<xsl:attribute name="src"><xsl:value-of select="/page/settings/document_root" />/preview/<xsl:value-of select="./@id" /></xsl:attribute>
						<xsl:attribute name="class">image</xsl:attribute>
						<xsl:attribute name="alt"><xsl:value-of select="./data/linktext" /> (<xsl:value-of select="round(./data/filesize div 1024)" /> Kb)</xsl:attribute>
					</xsl:element>
			</xsl:element>
		</xsl:element>
		</xsl:if>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Download']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:if test="./data/filesize > 0">
			<xsl:element name="div">
				<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
				<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
				<xsl:attribute name="class"><xsl:value-of select="./@type" /> rounded</xsl:attribute>
				<xsl:element name="a">
					<xsl:attribute name="href"><xsl:value-of select="/page/settings/document_root" />/download/<xsl:value-of select="./@id" /></xsl:attribute>
						<xsl:element name="img">
							<xsl:attribute name="src"><xsl:value-of select="/page/settings/document_root" />/skin/transparent-gif.gif</xsl:attribute>
							<xsl:attribute name="class">sprite sprite-attach</xsl:attribute>
							<xsl:attribute name="alt">Icon</xsl:attribute>
						</xsl:element> Download:
					<xsl:value-of select="./data/linktext" /> (<xsl:value-of select="round(./data/filesize div 1024)" /> Kb)
				</xsl:element>
			</xsl:element>
		</xsl:if>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Flash']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>

			<xsl:if test="./data/filesize > 0">
				<script type="text/javascript">
					swfobject.embedSWF("<xsl:value-of select="/page/settings/document_root" />/download/<xsl:value-of select="./@id" />", "flashcontent", "100%", "100%", "9.0.0", "<xsl:value-of select="/page/settings/document_root" />/files/expressinstall.swf", false, {salign:"t"});
				</script>

				<div style="height: 500px; vertical-align: text-top;" id="flashcontent">You do not have Adobe Flash player installed.</div>
			</xsl:if>

		</xsl:element>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Link']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<xsl:if test="string-length(./data/href) != 0">
				<xsl:element name="a">
					<xsl:attribute name="href"><xsl:value-of select="./data/href" /></xsl:attribute>
					<xsl:choose>
						<xsl:when test="string-length(./data/text) != 0">
							<xsl:value-of select="./data/text" />
						</xsl:when>
	
						<xsl:otherwise>
							<xsl:value-of select="./data/href" />
						</xsl:otherwise>
					</xsl:choose>
				</xsl:element>
			</xsl:if>
		</xsl:element>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>

	<xsl:template match="element[@type = 'element_Account']">
		<div id="account_personal_details">
		<xsl:if test="/user/administrator =1">You are set as a site Admin you have global edit permissions and have the ability to change site options</xsl:if>
			<div id="account_personal_details_title">Personal Details for <xsl:value-of select="/page/user/username" /></div>
			<xsl:element name="form">
				<xsl:attribute name="action"><xsl:value-of select="/page/settings/document_root" />/edit/account</xsl:attribute>
				<xsl:attribute name="method">post</xsl:attribute>
				<xsl:attribute name="id">update_<xsl:value-of select="/page/@id" /></xsl:attribute>
			<div>
				<div class="account_title">Nickname: </div>
				<div class="account_detail">
					<xsl:element name="input">
						<xsl:attribute name="type">text</xsl:attribute>
						<xsl:attribute name="name">nickname</xsl:attribute>
						<xsl:attribute name="value"><xsl:value-of select="/page/user/nickname" /></xsl:attribute>
					</xsl:element>
				</div>
			</div>
			<div>
				<div class="account_title">Forename: </div>
				<div class="account_detail">
					<xsl:element name="input">
						<xsl:attribute name="type">text</xsl:attribute>
						<xsl:attribute name="name">forename</xsl:attribute>
						<xsl:attribute name="value"><xsl:value-of select="/page/user/forename" /></xsl:attribute>
					</xsl:element>

			</div>
			</div>
				<div class="account_title">Surname: </div>
				<div class="account_detail">
					<xsl:element name="input">
						<xsl:attribute name="type">text</xsl:attribute>
						<xsl:attribute name="name">surname</xsl:attribute>
						<xsl:attribute name="value"><xsl:value-of select="/page/user/surname" /></xsl:attribute>
					</xsl:element>

			</div>
			<div>
				<div class="account_title">E-Mail: </div>
				<div class="account_detail">
					<xsl:element name="input">
						<xsl:attribute name="type">text</xsl:attribute>
						<xsl:attribute name="name">email</xsl:attribute>
						<xsl:attribute name="value"><xsl:value-of select="/page/user/email" /></xsl:attribute>
					</xsl:element>
				</div>
			<input type="submit" value="Update" />
			</div>
			</xsl:element>
			<div id="account_change_password_link">
			<xsl:element name="a">
				<xsl:attribute name="class">submodal-400-200</xsl:attribute>
				<xsl:attribute name="href"><xsl:value-of select="/page/settings/document_root" />/tools/changepassword</xsl:attribute>
				<span>Change Password</span>
			</xsl:element>
			</div>
		</div>
	</xsl:template>
	
	<xsl:template match="element[@type = 'element_RSS']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<xsl:value-of select="./data/rss" />
		</xsl:element>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>
	
	<xsl:template match="element[@type = 'element_SearchResults']">
	Search Results For: <span class="search_string"><xsl:value-of select="search/string"/> </span> <span class="search_time"> (Fetched in <xsl:choose><xsl:when test="search/time > 0"><xsl:value-of select="search/time" /> seconds</xsl:when><xsl:otherwise>less than one second</xsl:otherwise></xsl:choose>)</span><br/>
	<xsl:if test="search/corrected">
		Did you mean <a href="{/page/settings/document_root}/search?searchtext={search/corrected}"><xsl:value-of select="search/corrected" /></a>
		<br/>
	</xsl:if>
	<div>
	Please note the search only returns results you have permission to see.
	<xsl:if test="/page/user/id = 0">Please login to see all the results</xsl:if>
	<br/><br/>
	</div>
	
		<xsl:for-each select="search/results/result">
			<xsl:element name="div">
				<xsl:attribute name="id">eid_<xsl:value-of select="id" /></xsl:attribute>
				<xsl:attribute name="class">search_result</xsl:attribute>
				
				<div class="search_title">
					<xsl:value-of select="position" /> : <xsl:if test="id != page">[Direct Download] </xsl:if>
					<xsl:element name="a">
						<xsl:attribute name="href"><xsl:value-of select="/page/settings/document_root" />/<xsl:if test="id != page">download/</xsl:if><xsl:value-of select="id" />?highlight=<xsl:value-of select="/page/body//search/string"/></xsl:attribute>
						<xsl:value-of select="title" />
						<!-- <xsl:if test="length(title) = 0">No current title</xsl:if> -->
					</xsl:element>
				</div>
				<div>
					<xsl:value-of select="html" />
					<br />
					<span class="search_score">Score: <xsl:value-of select="score" /> features on 
					<xsl:element name="a">
						<xsl:attribute name="class">search_link</xsl:attribute>
						<xsl:attribute name="href"><xsl:value-of select="/page/settings/document_root" />/<xsl:value-of select="page" />?highlight=<xsl:value-of select="/page/body//search/string"/></xsl:attribute>
						<xsl:value-of select="/page/settings/document_root" />/<xsl:value-of select="page" />
					</xsl:element>
					</span>
					<br />
				</div>
			</xsl:element>
		</xsl:for-each>
	</xsl:template>
	
	<xsl:template match="element[@type = 'element_TagTree']">
		<xsl:call-template name="element_admin_header"/>
		<xsl:element name="div">
			<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
			<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
			<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
			<xsl:value-of select="./data/rss" />
		</xsl:element>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>
	
	<xsl:template match="element[@type = 'element_QuickProduct']">
		<xsl:call-template name="element_admin_header"/>
			<xsl:if test="./data/Price > 0 or /page/options/admin_mode = 1">
			<xsl:element name="div">
				<xsl:attribute name="id">eid_<xsl:value-of select="./@id" /></xsl:attribute>
				<xsl:if test="string-length(./@title) != 0"><xsl:attribute name="title"><xsl:value-of select="./@title" /></xsl:attribute></xsl:if>
				<xsl:attribute name="class"><xsl:value-of select="./@type" /><xsl:if test="/page/options/admin_mode = 1"> elementadmin</xsl:if></xsl:attribute>
				
	
				
				<span><xsl:if test="./data/filesize > 0"><img src="{/page/settings/document_root}/preview/{./@id}" alt="Photo of product" align="left" style="margin-right:5px;padding-right:5px;margin-bottom:5px;" /></xsl:if><xsl:value-of select="./@title" /><br/><xsl:value-of select="/page/settings/currency_symbol" /><xsl:value-of select="./data/Price" />
				<xsl:choose>
					<xsl:when test="./data/tax != 0"> + <xsl:value-of select="./data/tax * 100" />% Tax</xsl:when>
					<xsl:when test="/page/settings/shop_tax_rate != 0"> + <xsl:value-of select="/page/settings/shop_tax_rate * 100" />% Tax</xsl:when>
				</xsl:choose>
				<xsl:if test="./data/Shipping">
				+ Postage and Packaging
				</xsl:if>
				</span>
				<xsl:element name="form">
					<xsl:attribute name="style">display:inline;</xsl:attribute>
					<xsl:attribute name="method">get</xsl:attribute>
					<xsl:attribute name="action"><xsl:value-of select="/page/settings/document_root" />/cart/add/<xsl:value-of select="./@id" /></xsl:attribute>
					<xsl:element name="div">
						<xsl:attribute name="style"><xsl:value-of select="./@title" /></xsl:attribute>
						<xsl:element name="input">
							<xsl:attribute name="style">display:inline;</xsl:attribute>
							<xsl:attribute name="type">submit</xsl:attribute>
							<xsl:attribute name="value">Add to Cart</xsl:attribute> 
						</xsl:element>
					</xsl:element>
				</xsl:element>
				
				<br/>
				
				<xsl:if test="./data/description">
					<span><xsl:value-of select="./data/description"/></span>
				</xsl:if>
				<br/>
			</xsl:element>
		</xsl:if>
		<xsl:call-template name="element_admin_footer"/>
	</xsl:template>